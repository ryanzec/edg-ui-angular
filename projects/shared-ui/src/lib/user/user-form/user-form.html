<form class="flex flex-col gap-1" [formGroup]="userForm" (ngSubmit)="submit()">
  <org-form-fields>
    <org-form-field [validationMessage]="getFieldError('name') || ''">
      <org-label [label]="getFieldLabel('name')" htmlFor="name" />
      <org-input
        data-testid="name-input"
        type="text"
        name="name"
        formControlName="name"
        placeholder="Enter name"
        autocomplete="name"
        [disabled]="isProcessing()"
      />
    </org-form-field>
    <org-form-field [validationMessage]="getFieldError('email') || ''">
      <org-label [label]="getFieldLabel('email')" htmlFor="email" />
      <org-input
        data-testid="email-input"
        type="email"
        name="email"
        formControlName="email"
        placeholder="Enter email"
        autocomplete="email"
        preIcon="envelope"
        [disabled]="isProcessing()"
      />
    </org-form-field>
    <org-form-field [validationMessage]="getRoleError() || ''" formGroupName="roles">
      <org-label [label]="getFieldLabel('roles')" htmlFor="roles" />
      <div class="flex flex-col gap-0.5">
        @for (role of assignableRoles; track role) {
          <org-checkbox
            [name]="role"
            [value]="role"
            [formControlName]="role"
            [disabled]="role === 'user' || isProcessing()"
            attr.data-testid="role-checkbox-{{ role }}"
          >
            {{ getRoleLabel(role) }}
          </org-checkbox>
        }
      </div>
    </org-form-field>
  </org-form-fields>

  <org-button data-testid="submit-button" color="primary" type="submit" buttonClass="w-full" [loading]="isProcessing()">
    {{ submitButtonText() }}
  </org-button>
</form>
