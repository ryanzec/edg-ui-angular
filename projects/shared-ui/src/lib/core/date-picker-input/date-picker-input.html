<div [class]="mergeClasses('relative w-full', containerClass())">
  <div cdkOverlayOrigin #trigger="cdkOverlayOrigin">
    <org-input
      #inputComponent
      [value]="displayValue()"
      [placeholder]="placeholder()"
      [autoFocus]="autoFocus()"
      [disabled]="isDisabled()"
      [readonly]="true"
      preIcon="calendar"
      postIcon="caret-down"
      (postIconClicked)="onPostIconClick()"
      (click)="onInputClick()"
      (keydown)="onInputKeyDown($event)"
      [name]="name()"
    />
  </div>

  <ng-template
    cdkConnectedOverlay
    [cdkConnectedOverlayOrigin]="trigger"
    [cdkConnectedOverlayOpen]="isOverlayOpen()"
    [cdkConnectedOverlayPositions]="overlayPositions()"
    [cdkConnectedOverlayHasBackdrop]="true"
    [cdkConnectedOverlayBackdropClass]="'cdk-overlay-transparent-backdrop'"
    [cdkConnectedOverlayPanelClass]="'org-date-picker-input-overlay'"
    (backdropClick)="onBackdropClick()"
    (attach)="onOverlayAttach()"
    (detach)="onOverlayDetach()"
  >
    <org-calendar
      #calendarComponent
      [defaultDisplayDate]="defaultDisplayDate()"
      [startYear]="startYear()"
      [endYear]="endYear()"
      [selectedStartDate]="inProgressStartDate()"
      [selectedEndDate]="inProgressEndDate()"
      [allowRangeSelection]="allowRangeSelection()"
      [allowPartialRangeSelection]="allowPartialRangeSelection()"
      [partialRangeSelectionType]="inProgressPartialRangeSelectionType()"
      [disableBefore]="disableBefore()"
      [disableAfter]="disableAfter()"
      [allowedDateRange]="allowedDateRange()"
      [enableDeselection]="false"
      (dateSelected)="onDateSelected($event)"
      (partialRangeSelectionTypeChange)="onPartialRangeSelectionTypeChange($event)"
    />
  </ng-template>
</div>
